"use strict";var gameLife=function(a){var b,c,d,e,f,g,h=10,i=100,j=100,k="#bbb",l=2,m="#000",n="#fff",o="#aaa",p=3,q=2,r=100,s=.5,t=!1,u=function(a,c){if(2==b[a][c])return 2;for(var d=0,e=-2;2>=e;e++)0!==e&&(d+=1==b[(a+e+j)%j][(c+i)%i]);for(var f=-2;2>=f;f++)0!==f&&(d+=1==b[(a+j)%j][(c+f+i)%i]);return d===p?1:d!=q?0:b[a][c]},v=function(){for(var a=0;j>a;a++)for(var d=0;i>d;d++)c[a][d]=u(a,d);var e=!1;for(a=0;j>a;a++)for(d=0;i>d;d++)e=b[a][d],b[a][d]=c[a][d],c[a][d]=e},w=function(){for(var a=0;j>a;a++)for(var c=0;i>c;c++)b[a][c]=Boolean(Math.random()<s)?1:0},x=function(){e.save(),e.fillStyle=m;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&1==b[a][d]&&e.fill();e.fillStyle=n;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&0==b[a][d]&&e.fill();e.fillStyle=o;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&2==b[a][d]&&e.fill();e.restore()},y=function(){e.beginPath(),e.lineWidth=l,e.strokeStyle=k;for(var a=0;i>=a;a++)e.moveTo(a*h,0),e.lineTo(a*h,j*h);for(a=0;j>=a;a++)e.moveTo(0,a*h),e.lineTo(i*h,a*h);e.stroke()},z=function(){t||(t=!0,f=setInterval(function(){v(),x()},r))},A=function(){t&&clearInterval(f),t=!1},B=function(a,d){b=new Array(d),c=new Array(d);for(var e=0;d>e;e++){b[e]=new Array(a),c[e]=new Array(a);for(var f=0;a>f;f++)b[e][f]=0,c[e][f]=1}},C=function(){2===arguments.length?i=j=arguments[1]:arguments.length>=3&&(i=arguments[1],j=arguments[2],h=arguments[3],r=arguments[4],s=arguments[5]),B(i,j),0!=arguments.length&&(g=document.getElementById(arguments[0])),d=document.createElement("canvas"),d.width=i*h,d.height=j*h,g.appendChild(d),e=d.getContext("2d"),y(),w(),x(),z(),$(d).mousedown(function(a){var d=Math.floor(a.offsetX/10),e=Math.floor(a.offsetY/10);c[e][d]=b[e][d],b[e][d]=1!=b[e][d]?2-b[e][d]:2,x()})},D=function(a,b,c,e){A(),a>0&&150>=a&&(i=a),b>0&&150>=b&&(j=b),c>0&&30>=c&&(r=1e3/c),e>=0&&1>=e&&(s=e),g.removeChild(d),C()};a.lifeGame=C,a.reloadGame=D,a.gameInfo=function(){return{width:i,height:j,rate:Math.round(1e3/r),density:s,isStart:t,size:h,lifeColor:m,deadColor:n,wallColor:o}},a.gameControl={stop:A,start:z},a.__testOnly__={initArray:B,judge:u,randomMap:w,oneStep:v,getCalculationMap:function(){return c},getShowMap:function(){return b},setWidth:function(a){i=a},setHeight:function(a){j=a},setShowMap:function(a,c,d){b[a][c]=d},setLifeRate:function(a){s=a},getCanvasContext:function(){return e},getCanvas:function(){return d}}},gameLife=function(a){var b,c,d,e,f,g,h=10,i=100,j=100,k="#bbb",l=2,m="#000",n="#fff",o="#aaa",p=3,q=2,r=100,s=.5,t=!1,u=function(a,c){if(2==b[a][c])return 2;for(var d=0,e=-2;2>=e;e++)0!==e&&(d+=1==b[(a+e+j)%j][(c+i)%i]);for(var f=-2;2>=f;f++)0!==f&&(d+=1==b[(a+j)%j][(c+f+i)%i]);return d===p?1:d!=q?0:b[a][c]},v=function(){for(var a=0;j>a;a++)for(var d=0;i>d;d++)c[a][d]=u(a,d);var e=!1;for(a=0;j>a;a++)for(d=0;i>d;d++)e=b[a][d],b[a][d]=c[a][d],c[a][d]=e},w=function(){for(var a=0;j>a;a++)for(var c=0;i>c;c++)b[a][c]=Boolean(Math.random()<s)?1:0},x=function(){e.save(),e.fillStyle=m;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&1==b[a][d]&&e.fill();e.fillStyle=n;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&0==b[a][d]&&e.fill();e.fillStyle=o;for(var a=0;j>a;a++)for(var d=0;i>d;d++)e.beginPath(),e.rect(d*h+l/2,a*h+l/2,h-l,h-l),b[a][d]!==c[a][d]&&2==b[a][d]&&e.fill();e.restore()},y=function(){e.beginPath(),e.lineWidth=l,e.strokeStyle=k;for(var a=0;i>=a;a++)e.moveTo(a*h,0),e.lineTo(a*h,j*h);for(a=0;j>=a;a++)e.moveTo(0,a*h),e.lineTo(i*h,a*h);e.stroke()},z=function(){t||(t=!0,f=setInterval(function(){v(),x()},r))},A=function(){t&&clearInterval(f),t=!1},B=function(a,d){b=new Array(d),c=new Array(d);for(var e=0;d>e;e++){b[e]=new Array(a),c[e]=new Array(a);for(var f=0;a>f;f++)b[e][f]=0,c[e][f]=1}},C=function(){2===arguments.length?i=j=arguments[1]:arguments.length>=3&&(i=arguments[1],j=arguments[2],h=arguments[3],r=arguments[4],s=arguments[5]),B(i,j),0!=arguments.length&&(g=document.getElementById(arguments[0])),d=document.createElement("canvas"),d.width=i*h,d.height=j*h,g.appendChild(d),e=d.getContext("2d"),y(),w(),x(),z(),$(d).mousedown(function(a){var d=Math.floor(a.offsetX/10),e=Math.floor(a.offsetY/10);c[e][d]=b[e][d],b[e][d]=1!=b[e][d]?2-b[e][d]:2,x()})},D=function(a,b,c,e){A(),a>0&&150>=a&&(i=a),b>0&&150>=b&&(j=b),c>0&&30>=c&&(r=1e3/c),e>=0&&1>=e&&(s=e),g.removeChild(d),C()};a.lifeGame=C,a.reloadGame=D,a.gameInfo=function(){return{width:i,height:j,rate:Math.round(1e3/r),density:s,isStart:t,size:h,lifeColor:m,deadColor:n,wallColor:o}},a.gameControl={stop:A,start:z},a.__testOnly__={initArray:B,judge:u,randomMap:w,oneStep:v,getCalculationMap:function(){return c},getShowMap:function(){return b},setWidth:function(a){i=a},setHeight:function(a){j=a},setShowMap:function(a,c,d){b[a][c]=d},setLifeRate:function(a){s=a},getCanvasContext:function(){return e},getCanvas:function(){return d}}};